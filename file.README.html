<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Documentation by YARD 0.6.1</title>
<link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="_index.html" title="Index">Index</a> &raquo; 
    <span class="title">File: README</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><div id='filecontents'><h1>has_image - An Image attachment library for Active Record</h1>

<p>The has_image library extends Active Record to allow Rails applications to have
attached images. It is very small and lightweight: it only requires one column
in your model to store the uploaded image's file name.</p>

<p>It was originally created as a smaller, simpler, lighter alternative to
<a href="http://github.com/technoweenie/attachment_fu">attachment_fu</a> for applications
that need to handle uploaded images.</p>

<p>It only supports using a filesystem for storage, and only supports
<a href="http://github.com/probablycorey/mini_magick">MiniMagick</a> as an image processor.
However, its code is very small, clean and hackable, so adding support for other
backends or processors should be fairly easy.</p>

<p>Some typical use cases are: websites that want to create photo galleries with
fixed-dimension thumbnails, or that want to store user profile pictures without
creating a separate model for the images.</p>

<p>It creates only one database record per image, and uses ImageMagick's
<a href="http://www.imagemagick.org/script/command-line-options.php#crop">crop</a> and
<a href="http://www.imagemagick.org/script/command-line-options.php#gravity">center
gravity</a>
functions to produce thumbnails that generally look acceptable, unless the image
is a panorama, or the subject matter is close to one of the margins, etc. For
most sites where people upload pictures of themselves the generated thumbnails
will look good almost all the time.</p>

<h2>Examples</h2>

<p>Point-and-drool use case. It's probably not what you want, but it may be useful
for bootstrapping.</p>

<pre class="code"><span class='kw'>class</span> <span class='const'>Member</span> <span class='op'>&lt;</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span>
  <span class='id has_image'>has_image</span>
<span class='kw'>end</span>
</pre>

<p>Single image, no thumbnails, with some size limits:</p>

<pre class="code"><span class='kw'>class</span> <span class='const'>Picture</span> <span class='op'>&lt;</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span>
  <span class='id has_image'>has_image</span> <span class='symbol'>:resize_to</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>200x200</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='symbol'>:max_size</span> <span class='op'>=&gt;</span> <span class='int'>3</span><span class='period'>.</span><span class='id megabytes'>megabytes</span><span class='comma'>,</span>
    <span class='symbol'>:min_size</span> <span class='op'>=&gt;</span> <span class='int'>4</span><span class='period'>.</span><span class='id kilobytes'>kilobytes</span>
<span class='kw'>end</span>
</pre>

<p>Image with some thumbnails:</p>

<pre class="code"><span class='kw'>class</span> <span class='const'>Photo</span> <span class='op'>&lt;</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span>
  <span class='id has_image'>has_image</span> <span class='symbol'>:resize_to</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>640x480</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='symbol'>:thumbnails</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
      <span class='symbol'>:square</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>200x200</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='symbol'>:medium</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>320x240</span><span class='tstring_end'>&quot;</span></span>
    <span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='symbol'>:max_size</span> <span class='op'>=&gt;</span> <span class='int'>3</span><span class='period'>.</span><span class='id megabytes'>megabytes</span><span class='comma'>,</span>
    <span class='symbol'>:min_size</span> <span class='op'>=&gt;</span> <span class='int'>4</span><span class='period'>.</span><span class='id kilobytes'>kilobytes</span>
<span class='kw'>end</span>
</pre>

<p>It also provides a view helper to make displaying the images extremely simple:</p>

<pre class="code">&lt;%= image_tag_for(@photo) # show the full-sized image %&gt;
&lt;%= image_tag_for(@photo, :thumb =&gt; :square) # show the square thumbnail %&gt;
</pre>

<p>The image_tag_for helper calls Rails' image_tag, so you can pass in all the
regular options to set the alt property, CSS class, etc:</p>

<pre class="code">&lt;%= image_tag_for(@photo, :alt =&gt; &quot;my cool picture&quot;, :class =&gt; &quot;photo&quot;) %&gt;
</pre>

<p>Setting up forms for has_image is simple, too:</p>

<pre class="code">&lt;% form_for(@photo, :html =&gt; {:multipart =&gt; true}) do |f| %&gt;
  &lt;p&gt;
    &lt;%= f.label :image_data %&gt;
    &lt;%= f.file_field :image_data %&gt;
  &lt;/p&gt;
  &lt;p&gt;
    &lt;%= f.submit %&gt;
  &lt;/p&gt;
&lt;% end %&gt;
</pre>

<h2>Compatibility</h2>

<p>Has_image is compatible with Rails 2.1.x - 3.0.x.</p>

<h2>Getting it</h2>

<p>Install has_image via RubyGems:</p>

<p>  gem install has_image</p>

<p>and add it to your Gemfile (Rails 3.0.x) or environment.rb (Rails 2.x).</p>

<p>Then, add a column named <code>has_image_file</code> to your model.</p>

<h2>Source code</h2>

<p><a href="http://github.com/norman/has_image">http://github.com/norman/has_image</a></p>

<h2>FAQ</h2>

<h3>How do I validate the mime type of my uploaded images?</h3>

<p>You don't. Rather than examine the mime type, has_image runs the "identify"
command on the file to determine if it is processable by ImageMagick, and if it
is, converts it to the format you specify, which defaults to JPEG.</p>

<p>This is better than checking for mime types, because your users may upload
exotic image types that you didn't even realize would work, such as Truevision
Targa images, or Seattle Film Works files.</p>

<p>If you wish to give users a list of file types they can upload, a good start
would be jpeg, png, bmp, and maybe gif and ttf if your installation of
ImageMagick understands them. You can find out what image types your ImageMagick
understands by running:</p>

<pre class="code">identify -list format
</pre>

<p>Ideally, if your users just upload files that "look like" images on their
computers, it has_image should "just work."</p>

<h2>Hacking it</h2>

<p>Don't like the way it makes images? Want to pipe the images through some <a href="http://eigenclass.org/hiki/seam-carving-in-ocaml">crazy
fast seam carving library written in
OCaml</a>, or watermark them with
your corporate logo? Happiness is just a
<a href="http://en.wikipedia.org/wiki/Monkey_patch">monkey-patch</a> away:</p>

<pre class="code"><span class='kw'>module</span> <span class='const'>HasImage</span>
  <span class='kw'>class</span> <span class='const'>Processor</span>
    <span class='kw'>def</span> <span class='id resize_image'>resize_image</span><span class='lparen'>(</span><span class='id size'>size</span><span class='rparen'>)</span>
      <span class='comment'># your new-and-improved thumbnailer code goes here.
</span>    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</pre>

<p>Has_image follows a philosophy of <a href="http://weblog.jamisbuck.org/2006/10/18/skinny-controller-fat-model.">skinny model, fat
plugin</a>
This means that it tries to pollute your ActiveRecord model with as little
functionality as possible, so that in a sense, the model is acts like a
"controller" and the plugin like a "model" as regards the image handling
functionality. This makes it easier to test, hack, and reuse, because the
storage and processing functionality is largely independent of your model, and
of Rails.</p>

<h2>Bugs</h2>

<p>Please report them on the Github issue tracker.</p>

<p>Copyright (c) 2008-2010 Norman Clarke and Adrian Mugnolo. Released under the MIT
License.</p>

<h2>Acknowledgements</h2>

<p>We'd like to thank the following contributors for their help with has_image:</p>

<ul>
<li><a href="http://github.com/jschwindt">Juan Schwindt</a></li>
<li><a href="http://github.com/gerrit">Gerrit Keiser</a></li>
<li>the folks from <a href="http://github.com/tricycle">Tricycle Developments</a></li>
<li><a href="http://github.com/railsmonk">Dima Sabanin</a></li>
</ul>
</div></div>
    
    <div id="footer">
  Generated on Wed Sep 29 15:48:01 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.1 (ruby-1.9.2).
</div>

  </body>
</html>